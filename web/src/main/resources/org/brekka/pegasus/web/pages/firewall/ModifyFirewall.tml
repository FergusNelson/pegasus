<html t:type="layout" xmlns:p="tapestry:parameter"
	xmlns:t="http://tapestry.apache.org/schema/tapestry_5_3.xsd">

    
    <h2>Modify firewall ruleset '${firewall.name}'</h2>
    
    
    <h3>Firewall details</h3>
    
    <t:form t:id="firewall">
		<div class="field">
            <t:label for="firewallName">Name</t:label>
            <t:textfield t:id="firewallName" validate="required"/>
            <p>Name of this firewall</p>
        </div>
        
		<div class="field">
			<t:label for="firewallAction">Action</t:label>
			<t:select t:id="firewallAction" validate="required" />
			<p>If no rule matches, what action should be taken?</p>
		</div>
        
		<div class="field">
			<label>Action</label>
			<t:submit value="Update firewall" />
		</div>
    </t:form>
    
    <h3>Rules</h3>
    
    <t:zone t:id="ruleZone" id="ruleZone">
    
        <t:grid source="rules" row="loopRule" add="name,category,modify,remove" reorder="name,category,action,remove,modify" exclude="priority,created">
            <p:nameCell>
                ${loopRule.networkGroup.name}
            </p:nameCell>
            <p:categoryCell>
                ${loopRule.networkGroup.networkGroupCategory}
            </p:categoryCell>
            <p:removeCell>
                <t:actionlink t:id="remove" context="loopRule.id" zone="ruleZone">Remove</t:actionlink>
            </p:removeCell>
            <p:modifyCell>
                <t:pagelink page="networkgroup/modify" context="loopRule.id">Edit</t:pagelink>
            </p:modifyCell>
        </t:grid>
        
        <h4>Add a new rule</h4>
        
        <t:form zone="ruleZone" t:id="rule">
    		<div class="field">
    			<t:label for="group">Existing group</t:label>
    			<t:select t:id="group" model="groupModel" encoder="groupEncoder" zone="customGroupZone" />
    			<p>Select an existing group to add or leave blank to create a custom group</p>
    		</div>
            
            <t:zone t:id="customGroupZone" id="customGroupZone">
                <t:if test="enableName">
                    <div class="field">
                        <t:label for="ruleName">Group name</t:label>
                        <t:textfield t:id="ruleName" validate="required" />
                        <p>Name for the new group</p>
                    </div>
                    <p:else>
                        <div></div>
                    </p:else>
                </t:if>
            </t:zone>
            
    		<div class="field">
    			<t:label for="ruleAction">Action</t:label>
    			<t:select t:id="ruleAction" validate="required" />
    			<p>If a match occurs to this group, should remote user be allowed or denied?</p>
    		</div>
            
    		<div class="field">
    			<label>Action</label>
    			<t:submit value="Add rule" />
    		</div>
        </t:form>
    </t:zone>
</html>
